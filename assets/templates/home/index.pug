extends ../_trans.pug

block content
  include ../_panel.pug
  .row
    .col-md-6
      | {% if location %}
      +panel("{{ location.name }} ({{ location.id }})", false, true, true)
        div
          div(class="well well-sm")
            | &nbsp;
            a(href="{{ url_for('trans.edit_location') }}", class="btn btn-sm btn-primary", datat-toggle="tooltip", title="Новая")
              i(class="fa fa-plus")
            | &nbsp;
            a(href="{{ url_for('trans.edit_location', location_id=location.id) }}", class="btn btn-sm btn-primary", datat-toggle="tooltip", title="Редактировать")
              i(class="fa fa-edit")
        div {{ location.description }}
        | {% if location.links %}
        div
          .table-responsive
            table(class="table table-bordered table-hover")
              block table_headers
                thead
                  tr
                    th(class="col-md-2 col-lg-2 col-sm-2")
                      | &nbsp;
                    th(class="col-md-2 col-lg-2 col-sm-2")
                      a(href="?order=1") 
                        | № 
                        i(class="fa fa-arrows-v pull-right")
                    th
                      a(href="?order=2") 
                        | Название 
                        i(class="fa fa-arrows-v pull-right")
              tbody
                | {% for i in location.links %}
                tr
                  block row_controls

                  block row_data
                    td
                      center
                        div(class="btn-group btn-group-xs")
                          a(href="{ url_for('list_resolutions', decision_id=i.id) }", class="btn btn-sm btn-primary" data-toggle="tooltip", title="Просмотреть")
                            i(class="fa fa-search")
                          a(href="{ url_for('edit_decision', decision_id=i.id) }", class="btn btn-sm btn-primary" data-toggle="tooltip", title="Редактировать")
                            i(class="fa fa-edit")
                          a(data-href="{ url_for('del_decision', decision_id=i.id) }", class="btn btn-sm btn-primary confirm" data-toggle="modal", title="Удалить", data-text="Вы уверены, что хотите удалить эту запись?", data-target="#confirm-del")
                            i(class="fa fa-eraser")
                    td {{ i.id }}  
                    td {{ i.name }}  

                | {% endfor %}
        | {% else %}
        .panel-body
          h3 Список пуст
        | {% endif %}
      | {% endif %}
    .col-md-6
      .row
        .col-md-6
          +panel("Транспорт", false, true, true)
            div
              div(class="well well-sm")
                | &nbsp;
                a(href="{ url_for('edit_protocol', protocol_id=protocol.id) }", class="btn btn-sm btn-primary", datat-toggle="tooltip", title="Редактировать")
                  i(class="fa fa-edit")
        
                .pull-right
                  a(href="{ url_for('edit_case', case_id=protocol.case_id) }") {protocol.case}
            .panel-body
              | { if protocol.description }
              | { protocol.description }
              | { else }
              | <strong>Решений:</strong> { items.total}
              | { endif }
        .col-md-6
          +panel("Транспорт", false, true, true)
            div
              div(class="well well-sm")
                | &nbsp;
                a(href="{ url_for('edit_protocol', protocol_id=protocol.id) }", class="btn btn-sm btn-primary", datat-toggle="tooltip", title="Редактировать")
                  i(class="fa fa-edit")
        
                .pull-right
                  a(href="{ url_for('edit_case', case_id=protocol.case_id) }") {protocol.case}
            .panel-body
              | { if protocol.description }
              | { protocol.description }
              | { else }
              | <strong>Решений:</strong> { items.total}
              | { endif }
      .row
        .col-md-12
          div(class="panel panel-primary")
            .panel-heading
              h4.panel-title Остановки
            div
              div(class="well well-sm")
                | &nbsp;
                a(href="{ url_for('edit_protocol', protocol_id=protocol.id) }", class="btn btn-sm btn-primary", datat-toggle="tooltip", title="Редактировать")
                  i(class="fa fa-edit")
        
                .pull-right
                  a(href="{ url_for('edit_case', case_id=protocol.case_id) }") {protocol.case}
            .panel-body
              | { if protocol.description }
              | { protocol.description }
              | { else }
              | <strong>Решений:</strong> { items.total}
              | { endif }
      .row
        .col-md-12
          .pull-right
            a(href="{ url_for('edit_case', case_id=protocol.case_id) }", class="btn btn-default") Button 1


  block panel_master
    | {% if protocol %}
    div(class="panel panel-primary")
      .panel-heading
        h4.panel-title {{ protocol }}
      div
        div(class="well well-sm")
          | &nbsp;
          a(href="{{ url_for('edit_protocol', protocol_id=protocol.id) }}", class="btn btn-sm btn-primary", datat-toggle="tooltip", title="Редактировать")
            i(class="fa fa-edit")
        
          .pull-right
            a(href="{{ url_for('edit_case', case_id=protocol.case_id) }}") {{protocol.case}}
      .panel-body
        | {% if protocol.description %}
        | {{ protocol.description }}
        | {% else %}
        | <strong>Решений:</strong> {{ items.total}}
        | {% endif %}
    | {% endif %}

  +panel("Справочник", false, true, true)
    block items
      | {% if items %}
      | {% if items.items %}
      div
        .table-responsive
          table(class="table table-bordered table-hover")
            block table_headers
              // | Решения
              thead
                tr
                  th(class="col-md-1 col-lg1 col-sm-1")
                  th(style="width: 125px;")
                    a(href="?order=1") 
                      | Решение № 
                      i(class="fa fa-arrows-v pull-right")
                  th(style="width: 100px;")
                    a(href="?order=2") 
                      | Дата 
                      i(class="fa fa-arrows-v pull-right")
                  th
                    a(href="?order=3") 
                      | Тема 
                      i(class="fa fa-arrows-v pull-right")
                  th(style="width: 225px;")
                    a(href="?order=4") 
                      | Протокол
                      i(class="fa fa-arrows-v pull-right")
            tbody
              | {% for i in items.items %}
              tr
                block row_controls

                block row_data
                  td
                    center
                      div(class="btn-group btn-group-xs")
                        a(href="{{ url_for('list_resolutions', decision_id=i.id) }}", class="btn btn-sm btn-primary" data-toggle="tooltip", title="Просмотреть")
                          i(class="fa fa-search")
                        a(href="{{ url_for('edit_decision', decision_id=i.id) }}", class="btn btn-sm btn-primary" data-toggle="tooltip", title="Редактировать")
                          i(class="fa fa-edit")
                        a(data-href="{{ url_for('del_decision', decision_id=i.id) }}", class="btn btn-sm btn-primary confirm" data-toggle="modal", title="Удалить", data-text="Вы уверены, что хотите удалить эту запись?", data-target="#confirm-del")
                          i(class="fa fa-eraser")
                  td {{ i.decision_id_txt }}  
                  td {{ i.date }}
                  td {{ i.topic }}  
                  td 
                    | {% if i.protocol %}
                    a(href="{{ url_for('list_decisions', protocol_id=i.protocol.id) }}") {{ i.protocol }}  
                    | {% else %}
                    strong Решение не привязано к протоколу
                    | {% endif %}

              | {% endfor %}
      | {% else %}
      .panel-body
        h3 Список пуст
      | {% endif %}
      | {% endif %}
